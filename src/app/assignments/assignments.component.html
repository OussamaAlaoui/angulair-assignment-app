<div class="container">
  <span class="tableContainer">
    <div class="paginationBtn"></div>
    <div class="table-header">
      <div class="left">
        <p>{{ totalDocs }} Assignment Available</p>

        <button mat-flat-button class="menuBtn" [matMenuTriggerFor]="clickmenu">
          {{ MenuTitle }}<i class="arrow down"></i>
        </button>

        <mat-menu #clickmenu="matMenu">
          <button
            mat-menu-item
            *ngFor="let item of menuListItems"
            (click)="clickMenuItem(item)"
          >
            <p>{{ item }}</p>
          </button>
        </mat-menu>
      </div>

      <button
        class="addButton"
        mat-raised-button
        color="primary"
        routerLink="/add"
        [disabled]="connectionError || isLoading"
      >
        + Add new
      </button>
    </div>
    <div *ngIf="isLoading; else serverError" class="loading">

      <mat-spinner color="warn"></mat-spinner>
    </div>
    <ng-template #serverError>
    
    <div *ngIf="connectionError == true; else noData" class="no-data-found">
      <img src="../../assets/images/NoData.png" alt="" />
      <p>We could not connect to the server!</p>
      <p>try again later ;)</p>
    </div>

    </ng-template>


    <ng-template #noData> <div
      *ngIf="assignments.length == 0 && !connectionError; else list_assignment"
      class="no-data-found"
    >
      <img src="../../assets/images/NoData.png" alt="" />
      <p>No Data Found !!</p>
    </div></ng-template>
    
   
    <div>
      <ng-template #list_assignment>
        <div class="table_background">
          <table mat-table [dataSource]="assignments">
            <!-- check box -->

            <ng-container matColumnDef="check">
              <th mat-header-cell *matHeaderCellDef>Check</th>
              <td mat-cell *matCellDef="let element">
                <input type="checkbox" />
              </td>
            </ng-container>
            <ng-container matColumnDef="more">
              <th mat-header-cell *matHeaderCellDef>Details</th>
              <td mat-cell *matCellDef="let element">
                <button
                  mat-mini-fab
                  routerLink="/assignment/{{ element.id }}"
                  class="detailsBtn"
                  color="primary"
                >
                  <i class="fa fa-eye" style="font-size: 20px"></i>
                </button>
              </td>
            </ng-container>
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>Id</th>
              <td mat-cell *matCellDef="let element">{{ element.id }}</td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let element">{{ element.name }}</td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="dueDate">
              <th mat-header-cell *matHeaderCellDef>Due Date</th>
              <td mat-cell *matCellDef="let element">
                üóì {{ element.dueDate | date: "short" }}
              </td>
            </ng-container>
            <!-- buttons Column -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let element">
                <button
                  mat-mini-fab
                  color="warn"
                  aria-label="Delete"
                  class="action"
                  (click)="onDeleteAssignment(element)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
                <button
                  mat-mini-fab
                  color="primary"
                  aria-label="Edit"
                  class="action"
                  (click)="onEditAssignment(element)"
                >
                  <mat-icon>edit</mat-icon>
                </button>
              </td>
            </ng-container>
            <!-- Symbol Column -->
            <ng-container matColumnDef="isDue" class="isDue">
              <th mat-header-cell mat-sort-header *matHeaderCellDef>Is Due</th>
              <td mat-cell *matCellDef="let element">
                <div
                  class="assignmentStatus"
                  *ngIf="element.due; else notReturned"
                >
                  <p appRendu>‚úÖ Returned</p>
                </div>
                <ng-template #notReturned
                  ><p appNonRendu>‚ùóÔ∏è Not Returned</p>
                </ng-template>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <div class="pagination-tools">
            <div class="navigation">
              <button
                mat-raised-button
                color="primary"
                class="arrowBtn"
                (click)="firstPageBtn()"
                [disabled]="!hasPrevPage"
              >
                &laquo;
              </button>
              <button
                mat-raised-button
                color="primary"
                class="arrowBtn"
                (click)="prevPageBtn()"
                [disabled]="!hasPrevPage"
              >
                &#8249;
              </button>
              {{ page }} of {{ totalPages }}
              <!-- <div>{{page}} of {{totalPages}}</div> -->
              <button
                mat-raised-button
                color="primary"
                class="arrowBtn"
                (click)="nextPageBtn()"
                [disabled]="!hasNextPage"
              >
                &#8250;
              </button>
              <button
                mat-raised-button
                color="primary"
                class="arrowBtn"
                (click)="lastPageBtn()"
                [disabled]="!hasNextPage"
              >
                &raquo;
              </button>
            </div>
          </div>
        </div>
        <!-- <mat-list *ngFor="let assignment of assignments; let i = index">
        <nav>
          <a routerLink="/assignment/{{ assignment.id }}">
            <h3 mat-subheader>{{ assignment.dueDate | date: "short" }}</h3>
            <div class="list-items">
              <mat-list-item>
                <p appRendu *ngIf="assignment.due; else nonsoumis">
                  {{ assignment.id }} - {{ assignment.name }} a √©t√© due par
                  l'√©l√®ve.
                </p>
                <ng-template #nonsoumis>
                  <p appNonRendu>
                    {{ assignment.id }} - {{ assignment.name }} n'a pas √©t√© due
                    par l'√©l√®ve.
                  </p>
                </ng-template>
              </mat-list-item>
            </div>
          </a>
        </nav>
        <mat-divider></mat-divider> 
        </mat-list> -->
      </ng-template>
    </div>
  </span>
</div>
